program: spd/experiments/piecewise/piecewise_decomposition.py
method: grid
metric:
  name: total_loss
  goal: minimize
parameters:
  # topk:
  #   values: [0.5, 0.525, 0.55, 0.575, 0.6, 0.625, 0.65, 0.675, 0.7]
  # topk_l2_coeff:
  #   values: [1, 1e-2, 1e-3, 1e-4]
  lr:
    values: [1e-3]
  param_match_coeff:
    values: [1, 1e-4, 0]
  # seed:
  #   values: [0, 1, 2]
  topk_recon_coeff:
    # values: [1e4, 1e2] # Good for linear2 gradient attr
    # values: [1e1, 1, 1e-1] # Good for linear2
    values: [1e2, 1e-2]
  # topk_l2_coeff:
  #   # values: [1e1, 1, 1e-1, 1e-2] # Good for linear2 gradient attr
  #   values: [1e-1, 1e-2, 1e-4, 1e-6]
  #   # values: [1, 1e-2, 1e-4, 1e-6] # Good for linear1
  topk_l2_coeff:
    values: [1e-3, 1e-7, 0]
command:
- ${env}
- ${interpreter}
- ${program}
- spd/experiments/piecewise/piecewise_topk_full_rank_config.yaml